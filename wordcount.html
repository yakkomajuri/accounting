<!DOCTYPE HTML>

<html>

<!-- This website will count the words in a text for you, ignoring anything inside parentheses. 
    It is therefore suitable for students writing essays with Harvard-style referencing. -->
<style>
.mytext {
    width: 800px;
    height: 300px;
    margin-left: 20%;
}
h1 {
    text-align: center;
    padding-top: 30px;
}
.main {
    margin-left: 30%;
}
.btn-primary {
    margin-left: 45%;
    padding: 1%;
}
.res {
    margin-left: 42%;
    font-size: 25px; 
}
.p {
    text-align: center;
}
</style>

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

<head>

    <title>Word Count</title>

</head>

<body>
        <h1>Word Count Calculator for Harvard-style Referencing</h1>
        <br>
        <p class ="p">This counter will count the number of words in a text without taking parentheses into consideration. It is ideal for people using the Harvard-style referencing system. </p>
        <p class="p">If you have information in parentheses that is not a reference, make sure to add those words to the count afterwards. The program does not know what is a reference or not!</p>
        <p class="p"><b>Update: The area for pasting your text adds a space to the beginning and counts that as a word. Remember to delete that before starting!</b></p>
    <br>
<textarea type="text" id="es" class="mytext"> </textarea>
<div class="main"></div>
<br>
</div>
<br>
<button id="bt" class="btn btn-primary" onclick="countWords()">Count</button>

<br>
<br>
<div id="res" class="res">

</div>


</body>

<script>
    function countWords(es) {
        es =  String(document.getElementById("es").value);
        var wordCount = 0;
        var insideParentheses = false;
        var i;
        for (i = 0; i < es.length; i++) {
            if (es[i] === " " && insideParentheses === false) {  
                wordCount++;
                console.log(wordCount);
            }
            else if (es[i] === "(") { 
                if (es[i-1] === " ") {
                insideParentheses = true;
                console.log(insideParentheses);
                wordCount--;
                }
                else {
                insideParentheses = true;
                console.log(insideParentheses);
            }
            }
            else if (es[i] === ")") {
                insideParentheses = false;
                console.log(insideParentheses);
            }
            else {
                console.log("nothing to see here");
            }
        }
        wordCount++;
        document.getElementById("res").innerHTML = ("<b>Word Count: </b>" + wordCount);
    }
</script>
</html>
